// NIRI Configuration File for Pure Wayland Void Linux
// This configuration provides a modern dark theme with Windows-like keybindings
// for easier transition from Windows to Linux


// ============================================================================
// ONEDARK PRO COLOR PALETTE REFERENCE
// ============================================================================
// These colors can be used in your window rules or custom scripts
// 
// Background:      #000000  (Pure Black - modified from #282c34)
// Foreground:      #abb2bf  (Light Gray)
// 
// Black:           #282c34  (Original OneDark background)
// Red:             #e06c75  (Soft Red)
// Green:           #98c379  (Soft Green)
// Yellow:          #e5c07b  (Soft Yellow)
// Blue:            #61afef  (Bright Blue)
// Magenta:         #c678dd  (Purple)
// Cyan:            #56b6c2  (Cyan)
// White:           #dcdfe4  (Light Gray)
// 
// Bright Black:    #3e4451  (Comment Gray)
// Bright Red:      #be5046  (Dark Red)
// Bright Green:    #98c379  (Same as Green)
// Bright Yellow:   #d19a66  (Orange)
// Bright Blue:     #61afef  (Same as Blue)
// Bright Magenta:  #c678dd  (Same as Magenta)
// Bright Cyan:     #56b6c2  (Same as Cyan)
// Bright White:    #5c6370  (Gray)

// ============================================================================
// LAYOUT COLORS AND CONFIGS
// ============================================================================
layout {
    // Pure black background
    background-color "#000000"
    
    // Gaps between windows (modern look)
    gaps 10
    
    // Center focused column
    center-focused-column "never"
    
    // Default Window Width
    default-column-width { proportion 0.5; } 
    
    // Default Window Width
    default-window-height { proportion 0.5; } 
    
    // Preset column widths: Cycle between 1/3, 1/2, 2/3 of the output, and a fixed 720 logical pixels.
    preset-column-widths {
        proportion 0.33333
        proportion 0.5
        proportion 0.66667
    }
    
    // Preset Windows heights: Cycle between 1/3, 1/2, 2/3 of the output, and a fixed 720 logical pixels.
    preset-window-heights {
        proportion 0.33333
        proportion 0.5
        proportion 0.66667
        fixed 720
    }
    // Reserved Space for Status bar
    struts {
        left 0
        right 0
        top 30
        bottom 0
    }
    
    // Focus ring (active window highlight) - OneDark cyan
    focus-ring {
        width 2
        active-color "#61afef"        // Bright blue (OneDark Pro blue)
        inactive-color "#3e4451"      // Dark gray (OneDark Pro comment)
        
        // Optional gradient effect
        active-gradient from="#61afef" to="#56b6c2" angle=45
    }
    
    // Border configuration
    border {
        width 2
        active-color "#61afef"        // Bright blue for active
        inactive-color "#2c323c"      // Darker gray for inactive
        
        // Optional gradient
        active-gradient from="#61afef" to="#c678dd" angle=45
    }
}

// ============================================================================
// OVERVIEW MODE COLORS
// ============================================================================
overview {
    zoom 0.5
    backdrop-color "#000000"          // Pure black backdrop
    
    workspace-shadow {
        blur-sigma 8.0
        color "#000000"               // Pure black shadow
    }
}

// ============================================================================
// ANIMATION COLORS
// ============================================================================
// These affect config notifications and screenshot UI

animations {
   // Smooth window movements
    slowdown 1.0
    
    window-open {
        duration-ms 200
        curve "ease-out-cubic"
    }
    
    window-close {
        duration-ms 150
        curve "ease-in-cubic"
    }
    
    window-movement {
        duration-ms 200
        curve "ease-out-cubic"
    }
    
    window-resize {
        spring damping-ratio=1.0 stiffness=800 epsilon=0.0001
    }
    
    workspace-switch {
        duration-ms 250
        curve "ease-out-cubic"
    }
    
    horizontal-view-movement {
        duration-ms 250
        curve "ease-out-cubic"
    }
    
    overview-open-close {
        spring damping-ratio=1.0 stiffness=800 epsilon=0.0001
    }

    config-notification-open-close {
        spring damping-ratio=0.6 stiffness=1000 epsilon=0.001
    }
    
    screenshot-ui-open {
        spring damping-ratio=0.6 stiffness=1000 epsilon=0.001
    }
}

// ============================================================================
// INPUT CONFIGURATION
// ============================================================================
input {
    keyboard {
        xkb {
            // Set your keyboard layout
            layout "us"
            // Uncomment and modify if you need variant or options
            // variant "dvorak"
            // options "ctrl:nocaps,compose:ralt"
        }
        
        // Key repeat settings
        repeat-delay 600
        repeat-rate 25
    }
    
    touchpad {
        tap
        dwt  // Disable while typing
        natural-scroll
        accel-speed 0.2
        accel-profile "adaptive"
    }
    
    mouse {
        accel-speed 0.0
        accel-profile "flat"
    }
}

// ============================================================================
// OUTPUT CONFIGURATION
// ============================================================================
output "eDP-1" {
    // Uncomment and adjust for your display
    // mode "1920x1080@60.000"
    scale 1.0
    transform "normal"
    position x=0 y=0
}

// ============================================================================
// WINDOW RULES
// ============================================================================
window-rule {
    // Default rounded corners for all windows
    geometry-corner-radius 12
    clip-to-geometry true
    
    // Optional: Default border colors
    border {
        width 2
        active-color "#61afef"
        inactive-color "#2c323c"
    }
}

// Window rules Status Bar
window-rule {
    match app-id="niri-statusbar"
    focus-on-activate false			// Make it always visible
    
    border {
        width 2
        active-color "#98c379"        // Green accent
        inactive-color "#282c34"
    }
}

// Terminal windows - Cyan accent
window-rule {
    match app-id="foot"
    border {
        width 2
        active-color "#56b6c2"        // Cyan
        inactive-color="#2c323c"
    }
}

// File manager - Yellow accent
window-rule {
    match title="^lf.*"
    border {
        width 2
        active-color "#e5c07b"        // Yellow
        inactive-color "#2c323c"
    }
}

// Floating windows (calculator, etc.) - Purple accent
window-rule {
    match app-id="^org.gnome.Calculator$"
    default-column-width { fixed 400; }
    open-floating true
    border {
        width 2
        active-color "#c678dd"        // Purple/Magenta
        inactive-color "#2c323c"
    }
}

// Alert/Error windows - Red accent
window-rule {
    match is-focused=false
    opacity 0.95
    border {
        width 2
        inactive-color "#e06c75"      // Red for attention
    }
}


// ============================================================================
// APPEARANCE & THEME
// ============================================================================
prefer-no-csd  // Prefer server-side decorations

// Cursor theme
cursor {
    xcursor-theme "Adwaita"
    xcursor-size 24
}


// ============================================================================
// KEYBINDINGS (Windows-like shortcuts)
// ============================================================================
binds {
    // Mod key: Use "Super" for Windows key
    // Mod { default Mod+T; }  // Mod key definition is internal
    
    // ========================================================================
    // SYSTEM & SESSION
    // ========================================================================
    
    // Win+L: Lock screen (Windows-like)
    Mod+L { spawn "waylock"; }
    
    // Win+Shift+Q: Quit NIRI
    Mod+Shift+Q { quit; }
    
    // Win+Shift+R: Reload config
    // Mod+Shift+R { reload-config; }
    
    // ========================================================================
    // APPLICATION LAUNCHERS (Windows-like)
    // ========================================================================
    
    // Win+T: Terminal (like Windows Terminal)
    Mod+T { spawn "foot"; }
    
    // Win+E: File Manager (like Windows Explorer)
    Mod+E { spawn "foot" "-e" "lf"; }
    
    // Win+R: Application Launcher (like Windows Run)
    Mod+D { spawn "fuzzel"; }
    
    // Web Broswer
    //MOD+B { spawn "firefox"; }
    
    // Show a list of important hotkeys
    Mod+Shift+Slash { show-hotkey-overlay; }
    
    // ========================================================================
    // SCREENSHOTS (Windows-like)
    // ========================================================================

    // Print Screen: Full screenshot
    Print { spawn "sh" "-c" "grim - | wl-copy"; }

    // Win+Shift+S: Screenshot selection (like Windows Snip)
    Mod+Shift+S { spawn "sh" "-c" "grim -g \"$(slurp)\" - | wl-copy"; }
    
    // Full screenshot to file
    Shift+Print { spawn "sh" "-c" "grim ~/Pictures/screenshot-$(date +%Y%m%d-%H%M%S).png"; }

    // Screenshot selection to file  
    Mod+Print { spawn "sh" "-c" "grim -g \"$(slurp)\" ~/Pictures/screenshot-$(date +%Y%m%d-%H%M%S).png"; }
    
    // Alt+Print: Screenshot active window
    Alt+Print { screenshot-window; }
    
    // ========================================================================
    // WINDOW MANAGEMENT (Windows-like)
    // ========================================================================
    
    // Win+Left/Right: Windows Focus
    Mod+Left { focus-column-left; }
    Mod+Right { focus-column-right; }
    Mod+Up { focus-window-up; }
    Mod+Down { focus-window-down; }
    
    // Win+Shift+Left/Right: Move windows
    Mod+Shift+Left { move-column-left; }
    Mod+Shift+Right { move-column-right; }
    Mod+Shift+Up { move-window-up; }
    Mod+Shift+Down { move-window-down; }
    
    // Alt+F4: Close window (Windows-like)
    Alt+F4 { close-window; }
    
    // Win+Q: Alternative close window
    Mod+Q { close-window; }
    
    // Alt+Tab: Switch windows (Windows-like)
    Alt+Tab { focus-window-down-or-right; }
    Alt+Shift+Tab { focus-window-up-or-left; }
    
    // Win+Tab: Workspace overview
    Mod+Tab { focus-workspace-down; }
    Mod+Shift+Tab { focus-workspace-up; }

    // ========================================================================
    // WINDOW SIZING
    // ========================================================================
    
    // Win+F: Maximize/Fullscreen (Windows-like)
    Mod+F { maximize-column; }
    
    // Win+Shift+F: True fullscreen
    Mod+Shift+F { fullscreen-window; }
    
    // Resize windows
    Mod+Minus { set-column-width "-10%"; }
    Mod+Plus { set-column-width "+10%"; }
    
    // Reset window size
    Mod+0 { reset-window-height; }
    
    // Preset window widths
    Mod+1 { set-column-width "33%"; }
    Mod+2 { set-column-width "50%"; }
    Mod+3 { set-column-width "67%"; }
    
    // Switching between window (column) widths
    Mod+R { switch-preset-column-width; }
    
    // Switching between window height
    Mod+Shift+H { switch-preset-column-width; }
    
    // Snap back to Window height
    Mod+Ctrl+R { reset-window-height; }
    
    
    // ========================================================================
    // WORKSPACE MANAGEMENT (Windows-like Virtual Desktops)
    // ========================================================================
    
    // Win+Ctrl+Left/Right: Switch workspaces (Windows 11 Virtual Desktops)
    Mod+Ctrl+Left { focus-workspace-down; }
    Mod+Ctrl+Right { focus-workspace-up; }
    
    // Move window to workspace
    Mod+Ctrl+Shift+Left { move-window-to-workspace-down; }
    Mod+Ctrl+Shift+Right { move-window-to-workspace-up; }
    
    // Direct workspace switching (Win+1-9)
    Mod+1 { focus-workspace 1; }
    Mod+2 { focus-workspace 2; }
    Mod+3 { focus-workspace 3; }
    Mod+4 { focus-workspace 4; }
    Mod+5 { focus-workspace 5; }
    Mod+6 { focus-workspace 6; }
    Mod+7 { focus-workspace 7; }
    Mod+8 { focus-workspace 8; }
    Mod+9 { focus-workspace 9; }
    
    // Move to specific workspace
    Mod+Shift+Kv1 { move-window-to-workspace 1; }
    Mod+Shift+Kv2 { move-window-to-workspace 2; }
    Mod+Shift+Kv3 { move-window-to-workspace 3; }
    Mod+Shift+Kv4 { move-window-to-workspace 4; }
    Mod+Shift+Kv5 { move-window-to-workspace 5; }
    Mod+Shift+Kv6 { move-window-to-workspace 6; }
    Mod+Shift+Kv7 { move-window-to-workspace 7; }
    Mod+Shift+Kv8 { move-window-to-workspace 8; }
    Mod+Shift+Kv9 { move-window-to-workspace 9; }
    
    // ========================================================================
    // MEDIA KEYS (Volume & Brightness)
    // ========================================================================
    
    // Volume control with PipeWire/WirePlumber
    XF86AudioRaiseVolume { spawn "wpctl" "set-volume" "@DEFAULT_AUDIO_SINK@" "5%+"; }
    XF86AudioLowerVolume { spawn "wpctl" "set-volume" "@DEFAULT_AUDIO_SINK@" "5%-"; }
    XF86AudioMute { spawn "wpctl" "set-mute" "@DEFAULT_AUDIO_SINK@" "toggle"; }
    XF86AudioMicMute { spawn "wpctl" "set-mute" "@DEFAULT_AUDIO_SOURCE@" "toggle"; }
    
    // Brightness control with brightnessctl
    XF86MonBrightnessUp { spawn "brightnessctl" "set" "5%+"; }
    XF86MonBrightnessDown { spawn "brightnessctl" "set" "5%-"; }
    
    // Media playback
    XF86AudioPlay { spawn "playerctl" "play-pause"; }
    XF86AudioPause { spawn "playerctl" "pause"; }
    XF86AudioNext { spawn "playerctl" "next"; }
    XF86AudioPrev { spawn "playerctl" "previous"; }
    
    // ========================================================================
    // COLUMN/VIEW CONTROLS
    // ========================================================================
    
    // Consume window into column
    Mod+C { consume-window-into-column; }
    
    // Expel window from column
    Mod+X { expel-window-from-column; }
    
    // Center column
    Mod+Shift+C { center-column; }
    
    // ========================================================================
    // ADVANCED FEATURES
    // ========================================================================
    
    // Toggle debug overlay
    Mod+Shift+D { toggle-debug-tint; }
    
    // Screenshot active screen
    Mod+Shift+P { screenshot; }
    
    // Screenshot window
    Mod+Shift+W { screenshot-window; }
}

// ============================================================================
// DEBUG SETTINGS
// ============================================================================
debug {
    // Uncomment to enable debug features
    // preview-render "screencast"
    // disable-direct-scanout true
    // render-drm-device "/dev/dri/renderD129"
}

// ============================================================================
// SPAWN AT STARTUP
// ============================================================================
spawn-at-startup {
	// "~/.config/niri/statusbar.sh"
	
	
    // Example: Start a status bar
    // "waybar"
    
    // Example: Start notification daemon
    // "mako"
    
    // Example: Set wallpaper
    // "swaybg" "-i" "/path/to/wallpaper.jpg" "-m" "fill"
}

// ============================================================================
// ENVIRONMENT VARIABLES
// ============================================================================
environment {
    // Set dark theme for GTK applications
    GTK_THEME "Adwaita-dark"
    
    // QT theme
    QT_QPA_PLATFORMTHEME "qt5ct"
    
    // Enable Wayland for various toolkits
    WAYLAND_DISPLAY "wayland-1"
    XDG_SESSION_TYPE "wayland"
    XDG_CURRENT_DESKTOP "niri"
    
    // Firefox Wayland
    MOZ_ENABLE_WAYLAND "1"
    
    // SDL
    SDL_VIDEODRIVER "wayland"
}