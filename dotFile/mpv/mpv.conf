# === GENERAL SETTINGS ===
# Hardware acceleration for AMD
hwdec=auto-safe
hwdec-codecs=all

# GPU-Next with Wayland for Niri
vo=gpu-next
gpu-context=wayland
gpu-api=vulkan

# AMD-specific optimizations
vd-lavc-dr=yes
opengl-pbo=yes

# === NIRI-SPECIFIC SETTINGS ===
# Niri handles window positioning, disable mpv geometry save
no-keepaspect-window=no
geometry-autosave=no

# Better integration with Niri's tiling
border=no
no-window-dragging=yes

# Wayland-specific
wayland-disable-vsync=no
wayland-edge-pixels-pointer=16

# Window behavior
keep-open=yes
force-window=immediate
autofit-larger=90%x90%
cursor-autohide=1000

# === PERFORMANCE & QUALITY ===
# Optimized for Niri's rendering pipeline
video-sync=display-resample
interpolation=yes
tscale=oversample

# Cache for smoother playback
cache=yes
demuxer-max-bytes=400M
demuxer-max-back-bytes=150M

# Reduce latency in tiling WM
vd-lavc-threads=4

# === AUDIO ===
# PipeWire on Niri
audio-device=auto
audio-stream-silence=yes
volume=0
volume-max=200

# === PROFILE-BASED CONFIGURATION ===

# Default video profile
[video]
profile-desc="Video playback settings"
pause=no
loop-file=no
image-display-duration=0
interpolation=no

# Image profile
[image]
profile-desc="Image viewing settings" 
image-display-duration=inf
pause=no
loop-file=inf
keep-open=yes
force-window=immediate
video-sync=audio

# GIF profile  
[gif]
profile-desc="GIF animation settings"
image-display-duration=inf
pause=no
loop-file=inf
keep-open=yes
force-window=immediate
video-sync=audio

# Slideshow profile
[slideshow]
profile-desc="Image slideshow"
image-display-duration=5
pause=no
loop-playlist=inf
video-sync=audio

# === FILE TYPE AUTO-DETECTION ===
[extension.jpg]
profile=image

[extension.jpeg] 
profile=image

[extension.png]
profile=image

[extension.bmp]
profile=image

[extension.webp]
profile=image

[extension.svg]
profile=image

[extension.tif]
profile=image

[extension.tiff]
profile=image

[extension.gif]
profile=gif

[extension.mp4]
profile=video

[extension.mkv]
profile=video

[extension.avi] 
profile=video

[extension.webm]
profile=video

[extension.mov]
profile=video

[extension.flv]
profile=video
